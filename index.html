<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html" charset="UTF-8"/>
        <title>My application</title>
        <link rel="stylesheet" href="css/style.css" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    </head>
    <body>
        <div id="transition" class="startGame" style="opacity: 0;" >
        </div>

        <div id="startGame" class="startGame" style="z-index: 1000;">
            <div class="container">
                <div class="row-6">
                    <div class="d-flex justify-content-center">
                        <div class="informations">
                            <h6 class="informationText">Chargement...</h6>
                            <div class="loadingGame">
                                <div id="loadingGameBar" class="loadingGameBar"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="startScreen" class="d-flex justify-content-center startScreen" hidden>
                        <div class="playButton" id="playButton" onclick="init.launchGame()">
                            <h6 class="informationText" style="font-size: 30px;">Jouer !</h6>
                        </div>
                    </div>
                </div>

                <div class="row-6" hidden>
                    <div class="d-flex justify-content-center">
                        <div class="informations">
                            <p id="introduction" class="informationText" style="opacity: 0; text-align:inherit;">
                                Bienvenue chez Veripasur, une entreprise de sécurité domestique. Ton but est de sortir des 3 pièces en le 
                                moment de temps possible. Les pièces sont identiques sauf au niveau des sécurités mises en place pour éviter les 
                                évasions. Plus tu mettras de temps, moins tu as auras d'argent, tu perds 300$ toutes les 30 secondes à partir de 1 
                                minute dans la salle.
                                Bonne chance !
                            </p>
                        </div>
                    </div>
                </div>
                
                <div id="soundInfo" class="row-6">
                    <div class="d-flex justify-content-center">
                        <div class="" style="position: absolute;bottom:0; text-align: center">
                            <img src="./images/sound.png" height="30px" width="30px"/>
                            <h6 class="informationText">Il est conseillé d'avoir le son activé pour ce jeu.</h6>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>

        <div id="blocker" class="blocker" style="display:none">
            <div id="instructions">
                <span style="font-size:36px">En pause</span>
                <br /><br />
                Cliquez pour reprendre !
            </div>

        </div>

        <div id="dot" style="display: none" hidden>

        </div>

        <div id="laptop" class="laptopBackground" style="display:none">
            <div class="laptop">
                <div class="position-fixed" id="desktop" style="display:none">
                        <h1 class="title">
                            Veripasur 
                        </h1>
                        
                        <div class="row" style="flex-wrap: unset">
                            <div class="folder col-1" style="max-width: 150px;" onclick="init.openEmptyFolder()">
                                <img class="folderImg" src="./images/folder.png" height="100vmin" width="100vmin"/>
                                <p class="textIcon">Pas un dossier<br>pour hacker</p>
            
                            </div>
            
                            <div class="folder col-1" style="max-width: 150px;" onclick="init.openEmptyFolder()">
                                <img class="folderImg" src="./images/folder.png" height="100" width="100"/>
                                <p class="textIcon">Pas un dossier<br>pour hacker<br>je te dis</p>
            
                            </div>
            
                            <div class="folder col-1" style="max-width: 150px;" onclick="init.openEmptyFolder()">
                                <img class="folderImg" src="./images/folder.png" height="100" width="100"/>
                                <p class="textIcon">Devoirs</p>
            
                            </div>
                            <div class="w-100"></div>
                        </div>
        
                        <div class="row">
                            <div class="folder col-1" style="max-width: 150px;" onclick="init.openEmptyFolder()">
                                <img class="folderImg" src="./images/folder.png" height="100" width="100"/>
                                <p class="textIcon">Secrets d'état</p>
            
                            </div>
            
                            <div class="folder col-1" style="max-width: 150px;" onclick="init.openEmptyFolder()">
                                <img class="folderImg" src="./images/folder.png" height="100" width="100"/>
                                <p class="textIcon">Photos de moi<br>bébé</p>
            
                            </div>
                            <div class="w-100"></div>
                        </div>

                        <div class="row">
                            <div class=""></div>
                            <div class="folder col-1" style="max-width: 150px;" onclick="init.openFolderToHack()">
                                <img class="folderImg" src="./images/corneille.webp" height="100" width="100"/>
                                <p class="textIcon">Corneille</p>
            
                            </div>
                        </div>

                        <div class="fixed-bottom">
                            <div class="card" style="height: 90%; width: 90%; left: 5%; bottom: 3vmin">
                                <div class="card-body" style="padding:1px">
                                    <div class="home" onclick="init.closeLaptop()" onmouseover="init.showInfo('desktop')" onmouseout="init.hideInfo('desktop')">
                                        <img class="card-img-left" src="./images/menu.png" height="40" width="40"/>
                                    </div>
                                    <div class="infoButton" id="infoButton" style="display:none">
                                        Eteindre
                                    </div>
                                </div>
    
                            </div>
                        </div>
                </div>

                <div class="openedFolder position-fixed window" id="emptyFolder" style="display:none">
                    <div class="barFolder fixed-top" style="width: 80%; top: 10%; left: 10%;">
                        <div class="exitFolder" onclick="init.exitFolder('emptyFolder')">
                            <img src="./images/exit.png" height="30" width="30"/>
                        </div>
                        <p class="textFolder">Dossier vide !</p>
                    </div>

                </div>

                <div class="openedFolder position-fixed window" id="folderToHack" style="display:none">
                    <div class="barFolder fixed-top" style="width: 80%; top: 10%; left: 10%;">
                        <div class="exitFolder" onclick="init.exitFolder('folderToHack')">
                            <img src="./images/exit.png" height="30" width="30"/>
                        </div>

                    </div>

                    <div class="row">
                        <div class="folder col-1" style="max-width: 150px; margin-top: 40px;" onclick="init.hackDoor()">
                            <img class="folderImg" src="./images/file.png" height="100" width="100"/>
                            <p class="textIcon">HackDoor<br>.hack</p>
    
                        </div>
                    </div>
                    
                </div>

                <div class="windowHack position-fixed window" id="windowHack" style="display:none">
                    <div class="barFolder fixed-top" style="width: 40%; top: 30%; left: 30%;">
                        <div class="exitFolder" onclick="init.exitFolder('windowHack')">
                            <img src="./images/exit.png" height="30" width="30"/>
                        </div>

                    </div>
                    <div class="row">
                        <p class="text">Hack de la porte en cours.</p>
                    </div>
                    
                    <div class="row">
                        <div class="iconHack">
                            <img src="./images/hackman.png" height="70" width="70"/>

                        </div>

                        <div class="progressBar" id="progressHack">
                            <div class="progress">

                            </div>

                        </div>

                    </div>
                    <div class="row">
                        <p class="text" id="statusDoor" style="display:none">Porte piratée !!!</p>
                    </div>
                    

                </div>



                <div id="login">
                    <div class="login">
                        <input class="inputSelect" type="password" id="password" placeholder="Mot de passe">
                        <a class="sendButton" onclick="init.checkPassword()">-></a>
                    
                    </div>
                    <div class="buttonHomeLogin">
                        <div class="home" onclick="init.closeLaptop()" onmouseover="init.showInfo('login')" onmouseout="init.hideInfo('login')">
                            <img class="card-img-left" src="./images/exit.png" height="30" width="30"/>
                        </div>
                        <div class="infoButton" id="infoButtonLogin" style="display:none">
                            Eteindre
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="coffre" class="coffreBackground" style="display:none">
            <div class="buttonHomeLogin">
                <div class="home" onclick="init.closeLaptop()" onmouseover="init.showInfo('login')" onmouseout="init.hideInfo('login')">
                    <img class="card-img-left" src="./images/exit.png" height="20" width="20"/>
                </div>
                <div class="infoButton" id="infoButtonLogin" style="display:none">
                    Eteindre
                </div>
            </div>

            <div class="container">
                <div class="row" style="margin-top: 20px;">
                    <div class="container-fluid entryCode" style="width:90%; height: 80px;">
                        <p class="textCode" id="textCode"></p>
                    </div>
                </div>

                <div class="row" style="margin-top:20px;margin-left:1px; margin-right:1px;">
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">1</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">2</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">3</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">4</p>
                        </div>
                    </div>
                </div>

                <div class="row" style="margin-top:20px;margin-left:1px; margin-right:1px;">
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">5</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">6</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">7</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">8</p>
                        </div>
                    </div>
                </div>

                <div class="row" style="margin-top:20px;margin-left:1px; margin-right:1px;">
                    <div class="col-3">
                        <div class="buttonCoffre" onclick="init.removeAllCoffre()">
                            <img src="./images/delete.png" height="50px" width="50px"/>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">9</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">0</p>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="buttonCoffre" onclick="init.checkCode()">
                            <img src="./images/valid.png" width="50px" height="50px"/>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div id="messageBox">
            <p id="message" class="message hint">
                Tu pourras t'aider des touches ZQSD pour bouger, de la souris pour
                 t'orienter et du clic gauche pour selectionner.
            </p>
        </div>

        <div id="endGame" style="opacity: 0;z-index: 9999" hidden >
            <div class="container">
                <div class="d-flex justify-content-center">
                    <div class="informations">
                        <p class="informationText" style="text-align: inherit;">
                            Bien joué ! Nous contacterons nos ingénieurs pour augmenter la sécurité de nos salles.<br>
                        </p>
                        <p class="informationText" id="scoreEnd" style="text-align: inherit">
                            On ne sait pas encore :)
                        </p>
                        <p class="informationText" style="text-align:inherit;">
                            Merci d'avoir joué à mon jeu, j'espère qu'il vous a plu ! <br>
                            <span class="strong">-Elowan Harnisch</span>
                        </p>
                        <p class="informationText" style="text-align:inherit;">
                            Merci à <span class="strong">Lucas Guichard</span> pour la voix du personnage et à <span class="strong">Eve Hotome</span> pour la<br>
                            voix de la patronne !
                        </p>
                    </div>
                </div>
            </div>
            
        </div>

        <div class="position-fixed" style="z-index: 6">
            <span class="fixed-top" id="score" style="margin: 10px;font-size: 30px;font-weight: bold;color: red;">Argent pour l'instant : 3000 $</span>
        </div>

        <script>
            //On charge le module une fois que tout les éléments de la page ont chargé
            (window.addEventListener("load", function(){
                import('./js/game.js').then(object => {
                    let progressBar = document.getElementById("loadingGameBar");
                    progressBar.style.width = "50%";

                    init = object;
                })
            }))

            var init;
            var doorHacked = false;

            //On affecte chaque bouton du coffre à la fonction écrivant le nombre dans la bar
            var buttonsCoffre = document.getElementsByClassName("textCoffre")

            for(let i = 0; i < buttonsCoffre.length; i++){
                buttonsCoffre[i].parentNode.addEventListener("click", function(){
                    init.writeCoffre(buttonsCoffre[i].innerText)
                })
            }
        </script>

    </body>
</html>