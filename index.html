<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>My application</title>
        <link rel="stylesheet" href="css/style.css" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    </head>
    <body>
        <div id="blocker" class="blocker">
            <div id="instructions">
                <span style="font-size:36px">Cliquer pour jouer</span>
                <br /><br />
                Bouger: ZQSD<br/>
                Regarder: Souris
            </div>

        </div>

        <div id="dot" style="display: none">

        </div>

        <div id="laptop" class="laptopBackground" style="display:none">
            <div class="laptop">
                <div class="desktop" id="desktop" style="display:none">
                        <h1 class="title">
                            Veripasur 
                        </h1>
                        
                        <div class="row">
                            <div class="folder col-1" style="max-width: 150px;" onclick="openEmptyFolder()">
                                <img class="folderImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/OneDrive_Folder_Icon.svg/1200px-OneDrive_Folder_Icon.svg.png" height="100" width="100"/>
                                <p class="textIcon">Pas un dossier<br>pour hacker</p>
            
                            </div>
            
                            <div class="folder col-1" style="max-width: 150px;" onclick="openEmptyFolder()">
                                <img class="folderImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/OneDrive_Folder_Icon.svg/1200px-OneDrive_Folder_Icon.svg.png" height="100" width="100"/>
                                <p class="textIcon">Pas un dossier<br>pour hacker<br>je te dis</p>
            
                            </div>
            
                            <div class="folder col-1" style="max-width: 150px;" onclick="openEmptyFolder()">
                                <img class="folderImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/OneDrive_Folder_Icon.svg/1200px-OneDrive_Folder_Icon.svg.png" height="100" width="100"/>
                                <p class="textIcon">Devoirs</p>
            
                            </div>
                            <div class="w-100"></div>
                        </div>
        
                        <div class="row">
                            <div class="folder col-1" style="max-width: 150px;" onclick="openEmptyFolder()">
                                <img class="folderImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/OneDrive_Folder_Icon.svg/1200px-OneDrive_Folder_Icon.svg.png" height="100" width="100"/>
                                <p class="textIcon">Secrets d'état</p>
            
                            </div>
            
                            <div class="folder col-1" style="max-width: 150px;" onclick="openEmptyFolder()">
                                <img class="folderImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/OneDrive_Folder_Icon.svg/1200px-OneDrive_Folder_Icon.svg.png" height="100" width="100"/>
                                <p class="textIcon">Photos de moi<br>bébé</p>
            
                            </div>
                            <div class="w-100"></div>
                        </div>

                        <div class="row">
                            <div class="w-75"></div>
                            <div class="folder col-1" style="max-width: 150px;" onclick="openFolderNotHack()">
                                <img class="folderImg" src="https://cdn4.iconfinder.com/data/icons/email-2-2/32/Trash-Email-Bin-512.png" height="100" width="100"/>
                                <p class="textIcon">Corneille</p>
            
                            </div>
                        </div>

                        <div class="card" style="width: 100%; z-index: 1030; position:unset;">
                            <div class="card-body" style="padding:1px">
                                <div class="home" onclick="closeLaptop()" onmouseover="showInfo('desktop')" onmouseout="hideInfo('desktop')">
                                    <img class="card-img-left" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/VisualEditor_-_Icon_-_Menu.svg/1024px-VisualEditor_-_Icon_-_Menu.svg.png" height="40" width="40"/>
                                </div>
                                <div class="infoButton" id="infoButton" style="display:none">
                                    Eteindre
                                </div>
                            </div>

                        </div>
                        
                    <div class="openedFolder" id="emptyFolder" style="display:none">
                        <div class="barFolder" style="height:33px">
                            <div class="exitFolder" onclick="exitFolder('emptyFolder')">
                                <img src="http://cdn.onlinewebfonts.com/svg/img_469207.png" height="30" width="30"/>
                            </div>
                            <p class="textFolder">Dossier vide !</p>
                        </div>
    
                    </div>
    
                    <div class="openedFolder" id="folderToHack" style="display:none">
                        <div class="barFolder">
                            <div class="exitFolder" onclick="exitFolder('folderToHack')">
                                <img src="http://cdn.onlinewebfonts.com/svg/img_469207.png" height="30" width="30"/>
                            </div>
    
                        </div>
    
                        <div class="row">
                            <div class="folder col-1" style="max-width: 150px; margin-top: 40px;" onclick="hackDoor()">
                                <img class="folderImg" src="https://i.pinimg.com/originals/7f/d2/e4/7fd2e46b2da9819e667fb75caf475cf7.png" height="100" width="100"/>
                                <p class="textIcon">HackDoor<br>.hack</p>
        
                            </div>
                        </div>
                        
                        <div class="windowHack" id="windowHack" style="display:none">
                            <div class="barFolder" style="width:32%">
                                <div class="exitFolder" onclick="exitFolder('windowHack')">
                                    <img src="http://cdn.onlinewebfonts.com/svg/img_469207.png" height="30" width="30"/>
                                </div>
        
                            </div>
                            <div class="row">
                                <p class="textIcon" style="margin-top: 10%;">Hack de la porte en cours.</p>
                            </div>
                            
                            <div class="row">
                                <div class="iconHack">
                                    <img src="https://img.icons8.com/ios/452/hacker.png" height="70" width="70"/>
        
                                </div>
        
                                <div class="progressBar" id="progressHack">
                                    <div class="progress">
        
                                    </div>
        
                                </div>

                            </div>
                            <div class="row">
                                <p class="textIcon" id="statusDoor" style="margin-top: 60px; display:none">Porte piratée !!!</p>
                            </div>
                            
    
                        </div>
    
                    </div>
                </div>

                <div id="login">
                    <div class="login">
                        <input class="inputSelect" type="password" id="password" placeholder="Mot de passe">
                        <a class="sendButton" onclick="checkPassword()">-></a>
                    
                    </div>
                    <div class="buttonHomeLogin">
                        <div class="home" onclick="closeLaptop()" onmouseover="showInfo('login')" onmouseout="hideInfo('login')">
                            <img class="card-img-left" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/VisualEditor_-_Icon_-_Menu.svg/1024px-VisualEditor_-_Icon_-_Menu.svg.png" height="40" width="40"/>
                        </div>
                        <div class="infoButton" id="infoButtonLogin" style="display:none">
                            Eteindre
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="coffre" class="coffreBackground" style="display:none">
            <div class="container">
                <div class="row" style="margin-top: 20px;">
                    <div class="container-fluid entryCode" style="width:90%; height: 80px;">
                        <p class="textCode" id="textCode">2355468</p>
                    </div>
                </div>

                <div class="row" style="margin-top:20px;margin-left:1px; margin-right:1px;">
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">1</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">2</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">3</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">4</p>
                        </div>
                    </div>
                </div>

                <div class="row" style="margin-top:20px;margin-left:1px; margin-right:1px;">
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">5</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">6</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">7</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">8</p>
                        </div>
                    </div>
                </div>

                <div class="row" style="margin-top:20px;margin-left:1px; margin-right:1px;">
                    <div class="col-3">
                        <div class="buttonCoffre" onclick="removeAllCoffre()">
                            <img src="https://img.icons8.com/officel/2x/delete-sign.png" height="50px" width="50px"/>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">9</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="buttonCoffre">
                            <p class="textCoffre">0</p>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="buttonCoffre" onclick="checkCode()">
                            <img src="https://icons-for-free.com/iconfiles/png/512/correct+mark+success+tick+valid+yes+icon-1320167819078544687.png" width="50px" height="50px"/>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <script>
            var initFunctions;
            var doorHacked = false;

            import('./js/game.js').then(object => {
                init = object;
            })

            var buttonsCoffre = document.getElementsByClassName("textCoffre")

            for(let i = 0; i < buttonsCoffre.length; i++){
                buttonsCoffre[i].parentNode.addEventListener("click", function(){
                    writeCoffre(buttonsCoffre[i].innerText)
                })
            }

            function writeCoffre(number){
                let textCode = document.getElementById("textCode")

                if (textCode.innerText.length < 7){
                    textCode.innerText += number;

                } else {
                    textCode.parentNode.style.border = "solid 1px red"
                }

            }

            function removeAllCoffre(){
                let textCode = document.getElementById("textCode")
                textCode.innerText = "";
                textCode.parentNode.style.border = ""
            }

            function checkCode(){
                let textCode = document.getElementById("textCode");

                if (textCode.innerText === "59857"){
                    let coffre = document.getElementById("coffre");
                    coffre.style.display = "none";

                    init.unlockDoor()
                    init.controlLock()
                    
                    //Animation debloquage de la clé

                    
                }
            }

            function openFolderNotHack(){
                let folder = document.getElementById("folderToHack");
                folder.style.display = "";
            }

            function openEmptyFolder(){
                let folder = document.getElementById("emptyFolder");
                folder.style.display = "";
            }

            function exitFolder(app){
                let folder = document.getElementById(app)
                folder.style.display = "none";
            }

            function hackDoor(){
                let hackWindow = document.getElementById("windowHack")
                let hackBar = document.getElementById("progressHack");
                hackWindow.style.display = "";

                if (!doorHacked){
                    let pourcent = 0;

                    var increase = setInterval(()=>{
                        if(pourcent>=100){
                            stopIncrease()
                        }

                        hackBar.children[0].style.width = pourcent + "%";
                        pourcent = pourcent+1;

                    }, 50)

                    function stopIncrease(){
                        clearInterval(increase)
                        doorHacked = true
                        init.unlockDoor()
                        let status = document.getElementById("statusDoor")
                        status.style.display = ""
                    }   
                }
            }

            function closeLaptop(){
                let desktop = document.getElementById("desktop")
                desktop.style.display = "none"

                let login = document.getElementById("login")
                login.style.display = "";
                login.children[0].value = ""

                let laptop = document.getElementById("laptop")
                laptop.style.display = 'none'
                init.controlLock()
            }

            function showInfo(objet){
                let info;
                switch (objet){
                    case "desktop":
                        info = document.getElementById("infoButton")
                        break;
                    case "login":
                        info = document.getElementById("infoButtonLogin")
                        break;
                    default:
                        break;
                }
                
                info.style.display = ""
            }

            function hideInfo(objet){
                let info;
                switch (objet){
                    case "desktop":
                        info = document.getElementById("infoButton")
                        break;
                    case "login":
                        info = document.getElementById("infoButtonLogin")
                        break;
                    default:
                        break;
                }

                info.style.display = "none"
            }
        
            function checkPassword(){
                let password = document.getElementById("password")
                if (password.value == "password123"){
                    let login = document.getElementById("login")
                    login.style.display = "none"

                    let desktop = document.getElementById("desktop")
                    desktop.style.display = "";

                    password.classList = "inputSelect"
                } else {
                    password.classList += " wrong"
                    
                }
            }
        </script>

    </body>
</html>